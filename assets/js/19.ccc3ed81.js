(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{645:function(_,v,t){"use strict";t.r(v);var e=t(2),s=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"_1-1-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-概述"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[_._v("1.1.概述")])]),_._v(" "),t("p",[_._v("本章节描述应用开发关键要素，具体协议查看“应用开发标准”章节。")]),_._v(" "),t("p",[_._v("应用接入主要分为设备实时数据查询、设备实时控制、设备告警数据接收。IoT平台通过提供HttpsRest\nAPI和DDQ SDK用于设备数据查询、设备实时控制和设备实时数据推送、设备告警数据接收。")]),_._v(" "),t("p",[_._v("开发者可根据本文档说明基于IoT平台进行北向应用开发对接。")]),_._v(" "),t("h2",{attrs:{id:"_1-2-数据流转过程示意图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-数据流转过程示意图"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[_._v("1.2.数据流转过程示意图")])]),_._v(" "),t("p",[_._v("![数据流转过程示意图](file:///C:\\Users\\YANGJI~1\\AppData\\Local\\Temp\\msohtmlclip1\\01\\clip_image002.jpg)")]),_._v(" "),t("h2",{attrs:{id:"_1-3-api接口调用规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-api接口调用规范"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[_._v("1.3.API")]),_._v("接口调用规范")]),_._v(" "),t("h3",{attrs:{id:"_1-3-1-api说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-api说明"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[t("strong",[_._v("1.3.1.")]),_._v(" API")]),_._v("说明")]),_._v(" "),t("p",[_._v("l  API网关是IoT平台面向开发者接口定义转发的服务，提供接口为Restful风格的HTTP接口。协议版本为HTTPS\n1.1，HTTP 1.1。")]),_._v(" "),t("p",[_._v("l  API接口为REST风格的HTTP接口，其资源访问路径结构为 协议://域名/API路径。")]),_._v(" "),t("p",[_._v("l  HTTP Request以及Response都采用JSON格式字符串作为消息实体。")]),_._v(" "),t("p",[t("em",[_._v("注意：文件上传或其他流式数据传输另作讨论。")])]),_._v(" "),t("h3",{attrs:{id:"_1-3-2-请求鉴权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-请求鉴权"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[t("strong",[_._v("1.3.2.")]),_._v(" 请求鉴权")])]),_._v(" "),t("p",[t("a",{attrs:{href:""}},[_._v("1.3.2.1\n鉴权说明")])]),_._v(" "),t("p",[_._v("l  HTTP请求API必须带上鉴权信息，平台通过鉴权信息来决定该请求能访问API范围以及数据范围。")]),_._v(" "),t("p",[_._v('l  鉴权信息放入HTTP请求的Header中，Header字段为：“Access-Token"。 '),t("a",{attrs:{href:""}})]),_._v(" "),t("p",[t("a",{attrs:{href:""}},[_._v("1.3.2.2\n权限类型")])]),_._v(" "),t("p",[_._v("l   鉴权机制有两种，以具体的API以及业务为准")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[_._v("鉴权方式")])]),_._v(" "),t("th",[t("strong",[_._v("适用范围")])]),_._v(" "),t("th",[t("strong",[_._v("说明")])])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("AccessToken机制")]),_._v(" "),t("td",[_._v("Web/App端管理平台API")]),_._v(" "),t("td",[_._v('鉴权信息存入HTTP Header字段为：“Access-Token"')])]),_._v(" "),t("tr",[t("td",[_._v("Signature机制")]),_._v(" "),t("td",[_._v("SaaS服务云云对接")]),_._v(" "),t("td",[_._v('鉴权信息存入HTTP Header字段为：“Signature"')])])])]),_._v(" "),t("p",[t("a",{attrs:{href:""}})]),_._v(" "),t("p",[t("a",{attrs:{href:""}},[_._v("1.3.2.3\n鉴权信息类型")])]),_._v(" "),t("p",[_._v("l  注意：Access-Token为API网关北向应用调用时所需要传递的参数，但是SaaS应用本身设计API接口时，无需加入Access-Token字段。")]),_._v(" "),t("p",[_._v("l  鉴权信息优先以AccessToken为准，即是在请求头发现Access-Token标识会进入Access-Token的鉴权逻辑，仅在请求头未发现Access-Token标识且发现Signature标识才会进入Signature鉴权逻辑。")]),_._v(" "),t("p",[_._v("l  针对AccessToken鉴权机制和Signature机制鉴权机制，请求所需传的鉴权信息主要分为一下三种类型，不同的类型所能访问的权限结构不同，具体类型说明如下：")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[_._v("序号")])]),_._v(" "),t("th",[t("strong",[_._v("类型")])]),_._v(" "),t("th",[t("strong",[_._v("鉴权机制")])]),_._v(" "),t("th",[t("strong",[_._v("获取方式")])]),_._v(" "),t("th",[t("strong",[_._v("权限概述")])])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("Corp")]),_._v(" "),t("td",[_._v("企业登录验证")]),_._v(" "),t("td",[_._v("AccessToken机制")]),_._v(" "),t("td",[_._v("企业B端用户权限，主要用于管理台访问平台数据，包括不限于创建获取设备数据等")])]),_._v(" "),t("tr",[t("td",[_._v("2")]),_._v(" "),t("td",[_._v("User")]),_._v(" "),t("td",[_._v("用户登录验证")]),_._v(" "),t("td",[_._v("AccessToken机制")]),_._v(" "),t("td",[_._v("企业C端用户权限，主要用于C端APP访问平台数据，包括不限于订阅设备、获取个人信息等")])]),_._v(" "),t("tr",[t("td",[_._v("3")]),_._v(" "),t("td",[_._v("App")]),_._v(" "),t("td",[_._v("应用网关登录验证")]),_._v(" "),t("td",[_._v("Signature机制")]),_._v(" "),t("td",[_._v("应用网关权限，主要用于平台对接时，访问平台数据，可限制具体接口，包括不限于用户管理类数据、产品设备管理类数据等")])])])]),_._v(" "),t("h2",{attrs:{id:"_1-1-平台访问授权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-平台访问授权"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[_._v("1.1.平台访问授权")])]),_._v(" "),t("h3",{attrs:{id:"_1-1-1-应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-应用场景"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[t("strong",[_._v("1.1.1.")]),_._v(" 应用场景")])]),_._v(" "),t("p",[_._v("l  平台访问授权是IoT平台提供的一种通过非用户身份进行资源访问和接口调用的服务。可以通过本服务提供AccessKey获取到平台资源的使用权限。AccessKey拥有的权限为企业成员能够拥有的最高级权限。")]),_._v(" "),t("p",[_._v("l  通过IoT平台提供的AccessKeyId和AccessKeySecret，可以换取到AccessToken。通过换取到的AccessToken即可调用平台内部的接口。")]),_._v(" "),t("p",[_._v("l  企业开发的应用，直接访问平台资源的情况下，可以直接使用AccessKey进行获取授权。")]),_._v(" "),t("p",[_._v("l  第三方平台需要访问IoT平台资源时，可以直接使用AccessKey进行获取授权。")]),_._v(" "),t("p",[t("em",[_._v("注意：平台访问授权比**B")]),_._v(" "),t("em",[_._v("端认证、")]),_._v(" "),t("em",[_._v("C")]),_._v(" "),t("em",[_._v("端认证、")]),_._v(" "),t("em",[_._v("APP"),t("strong",[_._v("认证方式权限更高，请求头只需要")]),_._v("Access-Token**即可访问")]),_._v(" "),t("em",[_._v("API")]),_._v(" "),t("em",[_._v("。")])]),_._v(" "),t("h3",{attrs:{id:"_1-1-2-功能说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-功能说明"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[t("strong",[_._v("1.1.2.")]),_._v(" 功能说明")])]),_._v(" "),t("p",[_._v("l  在IoT平台的管理台【系统设置->平台访问授权】中添加AccessKey授权。AccessKeyId和AccessKeySecret为一组授权信息。通过AccessKey换取AccessToken的情况下，需要同时提供一组信息。在平台查验通过后，会返回AccessToken。通过获取到的AccessToken访问平台资源以及接口的调用。")]),_._v(" "),t("p",[_._v("l  同一个时间一个AccessKey只能换取到一个有效的AccessToken。即通过同一个AccessKey进行换取AccessToken时，前一个换取到的AccessToken会自动失效。使用失效的AccessToken调用接口后，会返回403：AccessToken Invalid的错误。")]),_._v(" "),t("p",[_._v("l  AccessToken在平台的默认有效期为10年，可以在平台手动禁用。")]),_._v(" "),t("p",[_._v("l  通过AccessKey进行访问，不会记录安全审计日志。")]),_._v(" "),t("h2",{attrs:{id:"_1-1-pi网关调用规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-pi网关调用规范"}},[_._v("#")]),_._v(" 1.1.PI网关调用规范")]),_._v(" "),t("h3",{attrs:{id:"_1-1-1-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-概述"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[t("strong",[_._v("1.1.1.")]),_._v(" 概述")])]),_._v(" "),t("p",[_._v("API网关是IoT平台面向开发者接口定义转发的服务，提供接口为Restful风格的HTTP接口。")]),_._v(" "),t("p",[_._v("HTTP Request以及Response都采用JSON格式字符串作为消息实体。")]),_._v(" "),t("p",[t("em",[_._v("注意：文件上传或其他流式数据传输另作讨论。")])]),_._v(" "),t("p",[_._v("采用HTTP协议的GET、POST、PUT、DELETE Method作为资源操作动作。操作原则为：")]),_._v(" "),t("p",[_._v("GET：进行数据获取，当url有参数时，需要URLEncode后方可传输；")]),_._v(" "),t("p",[_._v("POST：数据添加或者是复杂的数据查询，需要以Request Body作为查询参数的；")]),_._v(" "),t("p",[_._v("PUT：数据修改；")]),_._v(" "),t("p",[_._v("DELETE：数据删除；")]),_._v(" "),t("p",[_._v("术语")]),_._v(" "),t("p",[_._v("B端凭证：企业成员登录后换取的调用凭证。")]),_._v(" "),t("p",[_._v("C端凭证：企业用户登录后换取的调用凭证。")]),_._v(" "),t("p",[_._v("前端API：在API网关管理台创建定义，指定API的地址/方法/参数/认证方式等，为前后端开发进行对接而服务，前端API必须引用后端API才能实现具体的接口功能。")]),_._v(" "),t("p",[_._v("后端API：后端服务注册进入平台，前端API必须引用后端API才能实现具体的接口功能。")]),_._v(" "),t("p",[_._v("应用：利用应用的标识和秘钥进行签名作为访问前端API的一种方式，动态实现前端API授权的管控。")]),_._v(" "),t("h3",{attrs:{id:"_1-1-2-适用对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-适用对象"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[t("strong",[_._v("1.1.2.")]),_._v(" 适用对象")])]),_._v(" "),t("p",[_._v("l  前端开发工程师，使用API网关定义好的前端API进行前端产品开发；")]),_._v(" "),t("p",[_._v("l  后端开发工程师，使用API网关定义好的前端API进行二次开发以及接口聚合；")]),_._v(" "),t("p",[_._v("l  技术经理/架构师，了解API网关运行原理机制从而进行技术方案评估。")]),_._v(" "),t("h3",{attrs:{id:"_1-1-3-使用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-使用场景"}},[_._v("#")]),_._v(" "),t("a",{attrs:{href:""}},[t("strong",[_._v("1.1.3.")]),_._v(" 使用场景")])]),_._v(" "),t("p",[_._v("l  使用API网关定义好的前端API进行前端产品开发；")]),_._v(" "),t("p",[_._v("l  使用API网关定义好的前端API进行二次开发以及接口聚合从而实现云云对接等类似场景；")]),_._v(" "),t("p",[_._v("l  使用API网关支持的认证功能为后端服务提供安全校验；")]),_._v(" "),t("p",[_._v("l  使用API网关支持的流量控制功能为后端服务提供平滑流量控制；")]),_._v(" "),t("p",[_._v("l  使用API网关支持的访问控制功能为后端服务提供访问来源黑白名单限制。")])])}),[],!1,null,null,null);v.default=s.exports}}]);